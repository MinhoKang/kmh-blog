/* 코드 블록 스타일 */
pre {
  border-radius: 0.5rem;
  padding: 1rem;
  overflow-x: hidden; /* 작은 화면에서 가로 스크롤 숨김 */
  max-width: 100%; /* 가로 최대폭 100% 제한 */
  white-space: pre-wrap; /* 줄 바꿈 허용 */
  overflow-wrap: break-word;
}

html.dark pre {
  background: var(--color-neutral-800);
  color: var(--color-neutral-100);
  border-color: var(--color-neutral-700);
}

code {
  background: var(--color-neutral-100);
  color: var(--color-neutral-900);
  padding: 0.25rem 0.375rem;
  border-radius: 0.25rem;
  font-family: var(--font-family-mono);
  font-size: 0.875rem;
  font-weight: 500;
}

html.dark code {
  background: var(--color-neutral-800);
  color: var(--color-neutral-100);
}

/* 인라인 코드는 배경 없이 */
p code,
li code {
  background: transparent;
  padding: 0;
  color: inherit;
  font-weight: 600;
}

html.dark p code,
html.dark li code {
  background: transparent;
  color: inherit;
}

/* CustomMdxRemote wrapper 스타일 */
.prose-wrapper > * + * {
  @apply mt-6;
}

/* === rehype-pretty-code 스타일 === */
@layer base {
  /* === light mode (default) === */
  :root {
    /* === Code block - 코드블록 배경색 및 코드 조각 색을 설정한 shiki 테마에 맞게 === */
    figure[data-rehype-pretty-code-figure] {
      @apply border-neutral-300;
    }

    figure[data-rehype-pretty-code-figure] pre {
      @apply bg-neutral-50;
    }

    code[data-theme],
    code[data-theme] span {
      color: var(--shiki-light);
    }
  }

  /* === dark mode === */
  .dark {
    /* === Code block - 코드블록 배경색 및 코드 조각 색을 설정한 shiki 테마에 맞게 === */
    figure[data-rehype-pretty-code-figure] {
      @apply border-neutral-700;
    }

    figure[data-rehype-pretty-code-figure] pre {
      @apply bg-neutral-900;
    }

    code[data-theme],
    code[data-theme] span {
      color: var(--shiki-dark);
    }
  }
}

/* === Code block - basic structure (= 코드블록 간격, 라인별 간격, 폰트 크기 정도) === */
figure[data-rehype-pretty-code-figure] {
  @apply mb-6 overflow-clip rounded-lg border border-neutral-300 dark:border-neutral-700;
}

figure[data-rehype-pretty-code-figure] pre {
  overflow-x: auto;
  scrollbar-width: none;
  @apply py-4;
}

figure[data-rehype-pretty-code-figure] pre::-webkit-scrollbar {
  scrollbar-width: none;
}

figure[data-rehype-pretty-code-figure] pre [data-line] {
  @apply px-4 text-sm leading-relaxed;
}

/* rehype-autolink-headings 때문인 경우 */
.prose-wrapper .heading-link {
  text-decoration: none !important;
}
