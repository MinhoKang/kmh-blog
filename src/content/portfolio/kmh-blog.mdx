---
title: "KMH's Blog"
description: "Next.js 15, TypeScript, Tailwind v4로 mdx기반 블로그 개발"
startDate: "2025-09"
tags: ["Next.js", "TypeScript", "Tailwind v4", "MDX", "Blog"]
category: "portfolio"
featured: true
published: true
---

# 프로젝트 개요

**개인 포트폴리오와 블로그 기능을 통합한 웹사이트**를 Next.js 15와 TypeScript, Tailwind v4로 개발

## 프로젝트 정보

| 구분              | 내용                                |
| ----------------- | ----------------------------------- |
| **개발 기간**     | 2025년 9월                          |
| **프로젝트 성격** | 개인 포트폴리오 웹사이트            |
| **배포**          | Vercel                              |
| **콘텐츠 관리**   | MDX 기반 마크다운                   |
| **사용자 경험**   | 다크모드, 반응형 디자인, 애니메이션 |

## 기술 스택

| 영역           | 기술                                                                                                           |
| -------------- | -------------------------------------------------------------------------------------------------------------- |
| **프레임워크** | Next.js 15.5.3 (App Router) + React 19.1.0                                                                     |
| **언어**       | TypeScript                                                                                                     |
| **스타일링**   | Tailwind CSS 4.1.13                                                                                            |
| **콘텐츠**     | MDX + next-mdx-remote + gray-matter + rehype-pretty-code + rehype-slug + rehype-autolink-headings + remark-gfm |
| **배포**       | Husky + Vercel                                                                                                 |

## 핵심 기능

### 1. MDX 기반 콘텐츠 관리 시스템

**마크다운과 JSX를 결합한 MDX**를 활용하여 동적 콘텐츠를 구현했다.

**주요 기능**:

- **포트폴리오**: 프로젝트 상세 정보 및 이미지
- **기술 블로그**: 마크다운 기반 글 작성
- **개인 소개**: About 페이지
- **동적 라우팅**: `[slug]` 기반 페이지 생성

### 2. 반응형 디자인 시스템

반응형 디자인 시스템 구현

#### PC

<ImageContainer
  fixedHeight={true}
  heightClass="h-80"
  images={[
    {
      src: "/images/portfolio/Kmh-blog/home-light.JPG",
      alt: "grade card 스크린샷 1",
    },
    {
      src: "/images/portfolio/Kmh-blog/portfolio-light.JPG",
      alt: "grade card 스크린샷 2",
    },
    {
      src: "/images/portfolio/Kmh-blog/post-light.JPG",
      alt: "grade card 스크린샷 3",
    },
    {
      src: "/images/portfolio/Kmh-blog/about-light.JPG",
      alt: "예상 흐름도 스크린샷 1",
    },
  ]}
/>

#### Mobile (iPhone 14 pro max)

<ImageContainer
  fixedHeight={true}
  heightClass="h-80"
  images={[
    {
      src: "/images/portfolio/Kmh-blog/home-light-m.JPG",
      alt: "grade card 스크린샷 1",
    },
    {
      src: "/images/portfolio/Kmh-blog/portfolio-light-m.JPG",
      alt: "grade card 스크린샷 2",
    },
    {
      src: "/images/portfolio/Kmh-blog/post-light-m.JPG",
      alt: "grade card 스크린샷 3",
    },
    {
      src: "/images/portfolio/Kmh-blog/about-light-m.JPG",
      alt: "예상 흐름도 스크린샷 1",
    },
  ]}
/>

### 3. 다크모드 지원

**구현 방식**:

- **Tailwind CSS**: `dark:` 접두사 활용

(라이트모드는 위의 사진과 동일)

#### PC

<ImageContainer
  fixedHeight={true}
  heightClass="h-80"
  images={[
    {
      src: "/images/portfolio/Kmh-blog/home-dark.JPG",
      alt: "grade card 스크린샷 1",
    },
    {
      src: "/images/portfolio/Kmh-blog/portfolio-dark.JPG",
      alt: "grade card 스크린샷 2",
    },
    {
      src: "/images/portfolio/Kmh-blog/post-dark.JPG",
      alt: "grade card 스크린샷 3",
    },
    {
      src: "/images/portfolio/Kmh-blog/about-dark.JPG",
      alt: "예상 흐름도 스크린샷 1",
    },
  ]}
/>

#### Mobile (iPhone 14 pro max)

<ImageContainer
  fixedHeight={true}
  heightClass="h-80"
  images={[
    {
      src: "/images/portfolio/Kmh-blog/home-dark-m.JPG",
      alt: "grade card 스크린샷 1",
    },
    {
      src: "/images/portfolio/Kmh-blog/portfolio-dark-m.JPG",
      alt: "grade card 스크린샷 2",
    },
    {
      src: "/images/portfolio/Kmh-blog/post-dark-m.JPG",
      alt: "grade card 스크린샷 3",
    },
    {
      src: "/images/portfolio/Kmh-blog/about-dark-m.JPG",
      alt: "예상 흐름도 스크린샷 1",
    },
  ]}
/>

### 3. rehype-slug와 IntersectionObserver를 이용한 TOC 구현

#### 1️⃣ rehype-slug 설정

```typescript
// CustomMdxRemote.tsx
import rehypeSlug from "rehype-slug";

const mdxOptions = {
  mdxOptions: {
    rehypePlugins: [
      rehypeSlug, // 헤딩에 자동으로 ID 추가
      rehypeAutolinkHeadings, // 헤딩에 링크 추가
      // ... 다른 플러그인들
    ],
  },
};
```

#### 2️⃣ IntersectionObserver 구현

```typescript
// TableOfContents.tsx
useEffect(() => {
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const index = TAB_LIST.findIndex((tab) => tab.href === entry.target.id);
          if (index !== -1) {
            setNowMenu(index); // 현재 섹션 하이라이트
          }
        }
      });
    },
    { threshold: 1 } // 100% 보일 때만 트리거
  );

  // 모든 헤딩 요소 관찰
  const headings = document.querySelectorAll("h1, h2, h3, h4, h5, h6");
  headings.forEach((heading) => observer.observe(heading));

  return () => observer.disconnect();
}, []);
```

- **react-zoom-pan-pinch** 라이브러리 사용

<ImageContainer
  fixedHeight={true}
  heightClass="h-80"
  images={[
    {
      src: "/images/portfolio/Kmh-blog/image-viewer.JPG",
      alt: "grade card 스크린샷 1",
    },
  ]}
/>

### 4. 이미지 뷰어

- **react-zoom-pan-pinch** 라이브러리 사용

<ImageContainer
  fixedHeight={true}
  heightClass="h-80"
  images={[
    {
      src: "/images/portfolio/Kmh-blog/image-viewer.JPG",
      alt: "grade card 스크린샷 1",
    },
  ]}
/>

## 기술적 도전과 해결

### 1. 반응형 이미지 레이아웃 최적화

**문제**:

- 모바일에서 이미지가 화면을 벗어나 가로 스크롤 발생
- mdx에서 작성한 코드블럭이 레이아웃을 벗어나는 것이 원인(rehype-autolink-headings 기본 설정이 오버라이딩)

**해결책**:

- global.css에 다음 코드 삽입

```css
// /global.css

pre {
  border-radius: 0.5rem;
  padding: 1rem;
  overflow-x: hidden;
  max-width: 100%;
  white-space: pre-wrap; /* 줄 바꿈 허용 */
  overflow-wrap: break-word;
}
```

### 2. 다크모드 설정시 빌드 에러

**문제**: 다크모드 설정시 빌드 에러 발생(HookWebpackError: Cannot read properties of undefined (reading '0'))

**해결책**:

- [Next.js GitHub Discussion](https://github.com/vercel/next.js/discussions/76050)에서 해결책을 찾을 수 있었음

```css
// /global.css

code[data-theme*=" "],
    code[data-theme*=" "] span {
  color: var(--shiki-light);
}
code[data-theme*=" "],
code[data-theme*=" "] span {
  color: var(--shiki-dark);
}
```

**`*= " "`** 을 제거하면 빌드 성공

rehype-pretty-code 라이브러리에서 다크모드일 때 코드블럭 스타일을 설정하는 코드인데, 빌드할 때 cssnano(CSS를 최적화하는 PostCSS 플러그인)에서 오류가 발생.

tailwind v3에서는 문제 없는 코드이지만, v4에서는 문제가 되었고, **`*= " "`을 제거해도 다크모드, 라이트모드 동작에는 문제 없었음.**

**학습한 점**:

- cssnano 같은 CSS 압축 도구가 특정 CSS 선택자 문법(`*= " "`)을 파싱할 때 발생하는 에러 메커니즘 이해
- Tailwind CSS v3과 v4 간의 PostCSS 처리 방식 차이점과 하위 호환성 문제 경험

## 학습한 점

- **Tailwind CSS**: tailwind v4에 맞는 초기 설정 및 사용
- **rehype 플러그인**: MDX 콘텐츠 제작 및 관리
- **gray-matter**: mdx 파일의 front-matter 파싱
- **반응형 화면**: 구현 및 최적화
- **rehype-slug**: 라이브러리와 스크롤 계산을 통한 TOC 구현

## 향후 계획

### 단기 목표

- **SEO 최적화**: 메타 태그, 구조화된 데이터 추가
- **성능 개선**: 이미지 최적화, 코드 스플리팅
- **콘텐츠 확장**: 더 많은 프로젝트와 블로그 포스트 추가

### 장기 목표

- **Supabase**: 서버 구축 및 데이터베이스 연동
- **i18n**: 다국어 사이트 구현
