---
title: "NOWZ-RP 학생 관리 프로그램"
description: "나우즈 케어팀의 종합 학생 관리 시스템으로 실시간 채팅, 할 일 관리, 대시보드 등이 핵심 기능"
startDate: "2024-10"
endDate: "2025-08"
tags: ["Next.js 15", "React 19", "TypeScript", "Socket.io"]
category: "portfolio"
featured: true
published: true
---

## 프로그램 개요

나우즈 케어(원격)팀의 학생 관리 프로그램

실시간 채팅과 할 일 부여, 확인이 핵심 기능

---

## 기술 스택

- 프레임워크: Next 15 (App router) + React 19
- 언어: TypeScript
- 상태 관리: zustand
- 스타일링: tailwind, clsx, shadcn
- 통신: socket.io
- 폼 유효성 검사: react-hook-form + zod
- 모니터링/에러: sentry
- 개발 워크플로우: husky

---

## 내가 한 역할

### 실시간 채팅

#### 1. 개발 기능

    - 카카오톡과 같은 실시간 채팅 시스템
    - 채팅 전송, 검색, 삭제, 답장 및 양방향 무한 스크롤, 파일 전송 기능 포함

#### 2. 개발 기간

    - 2024년 8월 1일 ~ 2024년 12월 4일

#### 3. 개발 방법

    - Socket.io를 활용하여 실시간 채팅 시스템 구축
    - BroadcastChannel API 활용한 크로스탭 동기화
    - IntersectionObserver API를 활용하여 양방향 무한 스크롤 구현
    - ChattingRoom 컴포넌트를 개발하여 학생, 학부모 채팅방에 재사용

#### 4. 해결한 문제

    - 초기에는 정해진 양의 채팅만 받아서 렌더링하지만, 실시간으로 채팅이 많이 쌓이거나 이미지 채팅이 많아지는 경우
      채팅 기능의 성능 저하가 발생하여 React.memo를 이용하여 메모이제이션하여 INP를 3217ms에서 87ms로 개선
    - 사용자는 학부모와 학생 채팅을 모두 입장 가능한데, 학부모 채팅은 새로운 브라우저로 보여짐. 기존 브라우저의 채팅방 목록에는 학부모 채팅방의 최신 메세지, 읽음 상태 등이 보여지고 있음
      이 때 학부모 채팅방에서 발생하는 socket 이벤트가 기존 브라우저의 채팅방 목록 socket에 동기화가 되지 않는 문제 발생. BroadcastChannel API를 적용하여 문제 해결.

<br />
<ImageContainer
  images={[
    {
      src: "/images/portfolio/nowz-rp/nowz-rp-chat-structure.png",
      alt: "nowz-rp-chat-structure",
      width: "full",
    },
  ]}
/>

### 할 일

#### 1. 개발 기능

- 할 일 추가, 삭제, 수정
- 날짜, 시간, 내용, 용돈 금액, 인증 방법 등 입력
- 등교, 자기계발, 취침, 기상, 방정리 등 다양한 카테고리에 맞는 다른 양식의 할 일 모달
- 주소 검색

#### 2. 개발 기간

- 2025년 3월

#### 3. 개발 방법

- react-hook-form + zod를 이용한 유효성 검사
- ModalForm을 만들어 개발 기간 단축 및 useModal훅을 이용하여 쿼리 파라미터로 모달 상태 관리

### 대시보드 개발

1. 개발 기능
   - 학생 할 일 달성도, 메모, 매니저 할 일, 학생에 대한 개별 회의록 작성
2. 개발 기간
   - 2025년 2월

### 등록 관리

#### 1. 개발 기능

- 등록한 학생 및 학부모를 관리하는 어드민 페이지
- 미등록, 대기, 등록 완료, 만료 등 상태 변경
- 한 가족에 다른 학생 및 다른 학부모 연결

#### 2. 개발 기간

- 2025년 4월 ~ 2025년 5월

#### 3. 개발 방법

- 이전에 ZWON-상담 프로그램에서 개발한 Table컴포넌트와 Tab컴포넌트로 개발

### Sentry 적용

- sentry 적용하여 에러 모니터링 체계 구축

### 성능 개선

- Next.js의 보안 취약점(CVE-2025-29927) 소식을 접하고 바로 15.2.3 버전으로 업데이트
- 채팅 페이지 내에 약 10개의 모달이 필요 -> 다이나믹 임포트 적용
- Next.js 캐싱
  - 기존 구조에서 쿼리스트링이 변경될 때마다 서버 컴포넌트가 재실행되어서 불필요한 api요청이 많았고, 성능에도 문제가 있었음.
  - 서버 컴포넌트에서 tanstack-qeury의 queryClient.prefetchQuery로 서버 컴포넌트에서 데이터를 미리 받아서 캐싱하는 전략을 사용하려고 하니, 쿼리스트링이 바뀔 때마다 캐싱이 초기회 되는 문제 발생.
  - Next.js에서는 url을 변경할 때 Link나 router.push, router.replace를 사용하는데, Page router에서는 getServerSideProps가 다시 호출되지 않고 클라이언트 사이드에서 변경이 이루어지는 반면, App router에서는 쿼리스트링을 포함한 url이 변경되면 새로운 요청으로 간주하여 서버 컴포넌트가 서버에서 재실행되고, 그 결과 매번 새로운 QueryClient 인스턴스를 생성하여 기존 캐시를 덮어 쓰게 되어서 캐싱이 되지 않음.
  - 따라서 여러 상태를 쿼리스트링으로 관리하고 있는 구조 상, Next.js 캐싱 설정 수정 및 개선 → 캐싱 설정 적용 후 성능 아래와 같이 향상 및 불필요한 요청 감소
    <br />

  **학생관리 페이지**
  | 작업유형 | 개선 전(ms) | 개선 후(ms) | 개선율(%) | 속도 배율 |
  | -------------------------------- | ----------- | ----------- | --------- | --------- |
  | Scripting (자바스크립트 실행) | 844.75 | 658.31 | 22.07% | 1.28배 |
  | Rendering (레이아웃 계산 등) | 185.70 | 176.60 | 4.90% | 1.05배 |
  | Painting (화면 그리기) | 54.39 | 49.03 | 9.85% | 1.11배 |
  | Other (기타 작업) | 3696.74 | 3172.84 | 14.17% | 1.17배 |
  | Total Main Thread (총 작업 시간) | 1304.42 | 1093.43 | 16.18% | 1.19배 |

  **채팅**
  | 작업 유형 | 개선 전 (ms) | 개선 후 (ms) | 개선율 (%) | 속도 배율 |
  | -------------------------------- | ------------ | ------------ | ---------- | --------- |
  | Scripting (자바스크립트 실행) | 959.99 | 734.19 | 23.52% | 1.31배 |
  | Rendering (레이아웃 계산 등) | 106.26 | 101.48 | 4.50% | 1.05배 |
  | Painting (화면 그리기) | 96.73 | 72.67 | 24.87% | 1.33배 |
  | Total Main Thread (총 작업 시간) | 1443.67 | 1091.68 | 24.38% | 1.32배 |

  **등록관리**
  | 작업 유형 | 개선 전 (ms) | 개선 후 (ms) | 개선율 (%) | 속도 배율 |
  | -------------------------------- | ------------ | ------------ | ---------- | --------- |
  | Scripting (자바스크립트 실행) | 324.08 | 208.08 | 35.79% | 1.56배 |
  | Rendering (레이아웃 계산 등) | 81.98 | 52.25 | 36.26% | 1.57배 |
  | Painting (화면 그리기) | 51.64 | 30.36 | 41.21% | 1.70배 |
  | Total Main Thread (총 작업 시간) | 545.26 | 362.92 | 33.44% | 1.50배 |

### 8. 기타 기여사항

- 출시 전 테스트: QA팀의 부재로 출시 전 테스트 진행
- 출시 전 버그 수정: 57개 버그 수정
- 지속적으로 유지 및 보수, 기능 추가 진행 중
